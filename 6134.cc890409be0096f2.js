"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6134],{6134:(T,D,m)=>{m.r(D),m.d(D,{HomeWorkPageModule:()=>O});var k=m(177),a=m(4341),s=m(8974),f=m(3799),p=m(467),e=m(4438),w=m(4517),W=m(7673),h=m(8141),g=m(9437),u=m(980),S=m(5433),I=m(3366),_=m(1626),y=m(9732);let H=(()=>{var n;class c{constructor(o,t,r,l){this.appProp=o,this.apiService=t,this.http=r,this.loadingComponent=l,this.ipAddress=this.appProp.getHostName,this.getAllHomeWorkApiURL=this.ipAddress+"/v1/homework/getAllHomeworks",this.getHomeworksForSubForDayURL=this.ipAddress+"/v1/homework/getHomeworksForSubForDay",this.getHomeworksDeleteURL=this.ipAddress+"/v1/homework/deleteHomeWork",this.ipAddress=o.getHostName}getHomeworkList(){return this.loadingComponent.presentLoading("Fetching homework list..."),this.http.get(this.getAllHomeWorkApiURL).pipe((0,h.M)(o=>console.log("Fetched all homework successfully.")),(0,g.W)(this.handleError("Error while getting homework list")),(0,u.j)(()=>this.loadingComponent.dismissLoading()))}deleteHomeWork(o){return this.loadingComponent.presentLoading("Deleting homework list..."),console.log(this.getHomeworksDeleteURL+"/"+o),this.http.delete(this.getHomeworksDeleteURL+"/"+o).pipe((0,h.M)(t=>console.log("Fetched all homework successfully.")),(0,g.W)(this.handleError("Error while getting homework list")),(0,u.j)(()=>this.loadingComponent.dismissLoading()))}getHomeworksForSubForDay(o,t,r){return console.log(this.getHomeworksForSubForDayURL+"/"+o+"/"+t+"/"+r),this.http.get(this.getHomeworksForSubForDayURL+"/"+o+"/"+t+"/"+r).pipe((0,h.M)(l=>console.log("Fetched all homework successfully.")),(0,g.W)(this.handleError("Error while getting homework list")),(0,u.j)(()=>this.loadingComponent.dismissLoading()))}getHomeworkDetails(o){return this.loadingComponent.presentLoading("Fetching homework details..."),this.http.get(`${this.getAllHomeWorkApiURL}/${o}`).pipe((0,h.M)(t=>console.log(`Fetched homework details for ID: ${o}`)),(0,g.W)(this.handleError("Error while getting homework details")),(0,u.j)(()=>this.loadingComponent.dismissLoading()))}handleError(o="operation",t){return r=>(console.error(r),console.log(`${o} failed: ${r.message}`),(0,W.of)(t))}saveHomework(o){return this.loadingComponent.presentLoading("Saving homework..."),this.http.post(`${this.ipAddress}/v1/homework/saveHomeWork`,o).pipe((0,h.M)(t=>console.log("Homework saved successfully.")),(0,g.W)(this.handleError("Error while saving homework")),(0,u.j)(()=>this.loadingComponent.dismissLoading()))}}return(n=c).\u0275fac=function(o){return new(o||n)(e.KVO(S.e),e.KVO(I.G),e.KVO(_.Qq),e.KVO(y.q))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),c})();function j(n,c){if(1&n){const i=e.RV6();e.j41(0,"ion-button",13),e.bIt("click",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.onDelete())}),e.EFF(1," Delete Homework "),e.k0s()}}let C=(()=>{var n;class c{constructor(o,t,r,l,d){this.alertController=o,this.navParams=t,this.fb=r,this.modalCtrl=l,this.homeworkService=d,this.receivedData=this.navParams.get("data"),console.log("this.receivedData ",this.receivedData),this.homeWorkForm=this.receivedData}ngOnInit(){this.receivedData?this.editForm():this.createForm()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.modalCtrl.dismiss(this.homeWorkForm.value,"confirm")}createForm(){this.homeWorkForm=this.fb.group({id:[null],homeWorkId:["",a.k0.required],academicYear:["",a.k0.required],standardId:["",a.k0.required],branchId:["NLR001",a.k0.required],eDairyDetails:["",a.k0.required],subjectId:["",a.k0.required],dateOfAssignment:[(new Date).toISOString(),a.k0.required]})}editForm(){this.homeWorkForm=this.fb.group({id:[this.receivedData.id],homeWorkId:[this.receivedData.homeWorkId,a.k0.required],academicYear:[this.receivedData.academicYear,a.k0.required],standardId:[this.receivedData.standardId,a.k0.required],branchId:[this.receivedData.branchId,a.k0.required],eDairyDetails:[this.receivedData.eDairyDetails,a.k0.required],subjectId:[this.receivedData.subjectId,a.k0.required],dateOfAssignment:[this.receivedData.dateOfAssignment,a.k0.required]})}trimDateTime(o){if(!o)return"";const t=o.indexOf("T");return-1!==t?o.substring(0,t):o}onSubmit(){if(this.homeWorkForm.valid){const o={...this.homeWorkForm.value};o.dateOfAssignment&&(o.dateOfAssignment=this.trimDateTime(o.dateOfAssignment)),console.log(o),this.homeworkService.saveHomework(o).subscribe({next:()=>{this.presentAlert("Successfully Saved"),this.cancel()},error:t=>{console.error(t),this.presentAlert("Failed to save homework.")}})}else console.log(this.homeWorkForm.value)}onDelete(){this.receivedData&&this.receivedData.homeWorkId&&this.homeworkService.deleteHomeWork(this.receivedData.homeWorkId).subscribe({next:()=>{this.presentAlert("Homework deleted successfully"),this.cancel()},error:o=>{console.error(o),this.presentAlert("Failed to delete homework.")}})}presentAlert(o){var t=this;return(0,p.A)(function*(){yield(yield t.alertController.create({header:"Homework",message:o,buttons:["OK"]})).present()})()}}return(n=c).\u0275fac=function(o){return new(o||n)(e.rXU(s.hG),e.rXU(w.y8),e.rXU(a.ok),e.rXU(s.W3),e.rXU(H))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-home-work-form"]],inputs:{receivedData:"receivedData"},decls:35,vars:5,consts:[[3,"fullscreen"],[1,"form-container",3,"ngSubmit","formGroup"],["position","stacked"],["formControlName","homeWorkId","type","text"],["formControlName","academicYear","type","text"],["formControlName","standardId","type","text"],["formControlName","branchId","type","text","disabled",""],["formControlName","subjectId","type","text"],["formControlName","dateOfAssignment","presentation","date","prefer-wheel","false","display-format","YYYY-MM-DD"],["formControlName","eDairyDetails","autoGrow","true"],["expand","block","type","submit",3,"disabled"],["expand","block","color","danger",3,"click",4,"ngIf"],["expand","block","color","medium",3,"click"],["expand","block","color","danger",3,"click"]],template:function(o,t){1&o&&(e.j41(0,"ion-content",0)(1,"form",1),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(2,"ion-item")(3,"ion-label",2),e.EFF(4,"Homework ID"),e.k0s(),e.nrm(5,"ion-input",3),e.k0s(),e.j41(6,"ion-item")(7,"ion-label",2),e.EFF(8,"Academic Year"),e.k0s(),e.nrm(9,"ion-input",4),e.k0s(),e.j41(10,"ion-item")(11,"ion-label",2),e.EFF(12,"Standard ID"),e.k0s(),e.nrm(13,"ion-input",5),e.k0s(),e.j41(14,"ion-item")(15,"ion-label",2),e.EFF(16,"Branch ID"),e.k0s(),e.nrm(17,"ion-input",6),e.k0s(),e.j41(18,"ion-item")(19,"ion-label",2),e.EFF(20,"Subject ID"),e.k0s(),e.nrm(21,"ion-input",7),e.k0s(),e.j41(22,"ion-item")(23,"ion-label",2),e.EFF(24,"Date of Assignment"),e.k0s(),e.nrm(25,"ion-datetime",8),e.k0s(),e.j41(26,"ion-item")(27,"ion-label",2),e.EFF(28,"eDiary Details"),e.k0s(),e.nrm(29,"ion-textarea",9),e.k0s(),e.j41(30,"ion-button",10),e.EFF(31),e.k0s(),e.DNE(32,j,2,0,"ion-button",11),e.j41(33,"ion-button",12),e.bIt("click",function(){return t.cancel()}),e.EFF(34," Cancel "),e.k0s()()()),2&o&&(e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("formGroup",t.homeWorkForm),e.R7$(29),e.Y8G("disabled",!t.homeWorkForm.valid),e.R7$(),e.SpI(" ",t.receivedData?"Update Homework":"Create Homework"," "),e.R7$(),e.Y8G("ngIf",t.receivedData))},dependencies:[k.bT,a.qT,a.BC,a.cb,s.Jm,s.W9,s.A9,s.$w,s.uz,s.he,s.nc,s.Je,s.Gw,a.j4,a.JD],styles:[".form-container[_ngcontent-%COMP%]{padding:16px}"]}),c})();var E=m(357);const P=()=>[];function M(n,c){if(1&n&&(e.j41(0,"ion-segment-button",10)(1,"ion-label"),e.EFF(2),e.k0s()()),2&n){const i=c.$implicit;e.Y8G("value",i),e.R7$(2),e.JRh(i)}}function A(n,c){1&n&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3,"No homework for the selected day"),e.k0s()()())}function R(n,c){if(1&n){const i=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p")(5,"strong"),e.EFF(6,"Standard:"),e.k0s(),e.EFF(7),e.k0s(),e.j41(8,"p")(9,"strong"),e.EFF(10,"Academic Year:"),e.k0s(),e.EFF(11),e.k0s(),e.j41(12,"p")(13,"strong"),e.EFF(14,"Branch:"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"p")(17,"strong"),e.EFF(18,"Assigned On:"),e.k0s(),e.EFF(19),e.k0s(),e.j41(20,"p")(21,"strong"),e.EFF(22,"Details:"),e.k0s(),e.EFF(23),e.k0s()(),e.j41(24,"ion-icon",11),e.bIt("click",function(){e.eBV(i);const t=e.XpG();return e.Njj(t.sendCommunicaitonMessage(t.noticeItem.noticeDetails))}),e.k0s(),e.j41(25,"ion-icon",12),e.bIt("click",function(){const t=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.editSchoolNoticeBoard(t))}),e.k0s(),e.j41(26,"ion-icon",13),e.bIt("click",function(){const t=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.duplicateSchoolNoticeBoard(t))}),e.k0s(),e.j41(27,"ion-icon",14),e.bIt("click",function(){const t=e.eBV(i).$implicit,r=e.XpG();return e.Njj(r.deleteHomeWork(t.id))}),e.k0s()()}if(2&n){const i=c.$implicit;e.R7$(3),e.Lme("",i.homeWorkId," - ",i.subjectId,""),e.R7$(4),e.SpI(" ",i.standardId,""),e.R7$(4),e.SpI(" ",i.academicYear,""),e.R7$(4),e.SpI(" ",i.branchId,""),e.R7$(4),e.SpI(" ",i.dateOfAssignment,""),e.R7$(4),e.SpI(" ",i.eDairyDetails,"")}}const L=[{path:"",component:(()=>{var n;class c{constructor(o,t,r,l){this.router=o,this.modalCtrl=t,this.hwService=r,this.storageService=l,this.message="This modal example uses the modalController to present and dismiss modals.",this.selectedSubject="",this.selectedDate=(new Date).toISOString()}ngOnInit(){this.getTodaysHomework()}filteredHomeworkList(){return this.homeworkList?this.homeworkList.filter(o=>o.subjectId===this.selectedSubject):[]}routePage(o){"landingPage"===o&&this.router.navigate(["tab1"])}reFetchAllHomeworkList(){this.hwService.getHomeworkList().subscribe(o=>{console.log(o),this.homeworkList=o,this.uniqueSubjectIds=Array.from(new Set(this.homeworkList.map(t=>t.subjectId)))})}deleteHomeWork(o){this.hwService.deleteHomeWork(o).subscribe(t=>{console.log(t),this.getTodaysHomework()})}editSchoolNoticeBoard(o){this.openEditEventModal(o)}createSchoolNoticeBoard(){this.openEditEventModal()}duplicateSchoolNoticeBoard(o){o.id=null,console.log("Duplicate"),console.log(o),this.openEditEventModal(o)}openEditEventModal(o){var t=this;return(0,p.A)(function*(){console.log("Sending to modal"),o&&console.log(o);const r=yield t.modalCtrl.create({component:C,...o&&{componentProps:{data:o}}});yield r.present();const{data:l,role:d}=yield r.onWillDismiss();"confirm"===d&&(t.message=`Hello, ${l}!`),t.getTodaysHomework()})()}trimDateTime(o){if(!o)return"";const t=o.indexOf("T");return-1!==t?o.substring(0,t):o}onDateChange(o){var t=this;return(0,p.A)(function*(){const r=yield t.storageService.getStudentDetails();if(r&&Object.keys(r).length>0){console.log("event.detail.value:",o.detail.value);const l=t.trimDateTime(o.detail.value);console.log("Formatted Selected Date:",l),t.hwService.getHomeworksForSubForDay(l,r.branchId,r.standardId).subscribe(d=>{console.log(d),t.homeworkList=d,t.uniqueSubjectIds=Array.from(new Set(t.homeworkList.map(F=>F.subjectId)))})}})()}getTodaysHomework(){var o=this;return(0,p.A)(function*(){const t=yield o.storageService.getStudentDetails();if(t&&Object.keys(t).length>0){const r=new Date,v=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;console.log(v),console.log("Formatted Selected Date:",v),o.hwService.getHomeworksForSubForDay(v,t.branchId,t.standardId).subscribe(b=>{console.log(b),o.homeworkList=b,o.uniqueSubjectIds=Array.from(new Set(o.homeworkList.map(N=>N.subjectId)))})}})()}}return(n=c).\u0275fac=function(o){return new(o||n)(e.rXU(f.Ix),e.rXU(s.W3),e.rXU(H),e.rXU(E.n))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-home-work"]],decls:19,vars:8,consts:[[3,"translucent"],["src","../../assets/images/SchooleDairyIcon.png",1,"eDairyHeadderHomeIcon",3,"click"],["size","8",1,"custom-col","ion-text-center"],[3,"fullscreen"],["presentation","date",3,"ngModelChange","ionChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["title","Create Homework","expand","block","name","create-outline",3,"click"],[3,"value"],["slot","end","expand","block","name","notifications",3,"click"],["slot","end","expand","block","name","create",3,"click"],["slot","end","expand","block","name","copy",3,"click"],["slot","end","expand","block","name","trash",3,"click"]],template:function(o,t){if(1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-grid")(3,"ion-row")(4,"ion-col")(5,"ion-img",1),e.bIt("click",function(){return t.routePage("landingPage")}),e.k0s()(),e.j41(6,"ion-col",2),e.EFF(7,"Home Work"),e.k0s(),e.nrm(8,"ion-col"),e.k0s()()()(),e.j41(9,"ion-content",3)(10,"ion-datetime",4),e.mxI("ngModelChange",function(l){return e.DH7(t.selectedDate,l)||(t.selectedDate=l),l}),e.bIt("ionChange",function(l){return t.onDateChange(l)}),e.k0s(),e.j41(11,"ion-segment",5),e.mxI("ngModelChange",function(l){return e.DH7(t.selectedSubject,l)||(t.selectedSubject=l),l}),e.DNE(12,M,3,2,"ion-segment-button",6),e.k0s(),e.DNE(13,A,4,0,"ion-item",7),e.j41(14,"ion-list"),e.DNE(15,R,28,7,"ion-item",8),e.k0s(),e.j41(16,"ion-list")(17,"ion-item")(18,"ion-icon",9),e.bIt("click",function(){return t.createSchoolNoticeBoard()}),e.k0s()()()()),2&o){let r;e.Y8G("translucent",!0),e.R7$(9),e.Y8G("fullscreen",!0),e.R7$(),e.R50("ngModel",t.selectedDate),e.R7$(),e.R50("ngModel",t.selectedSubject),e.R7$(),e.Y8G("ngForOf",t.uniqueSubjectIds),e.R7$(),e.Y8G("ngIf",0===(null!==(r=t.filteredHomeworkList())&&void 0!==r?r:e.lJ4(7,P)).length),e.R7$(2),e.Y8G("ngForOf",t.filteredHomeworkList())}},dependencies:[k.Sq,k.bT,a.BC,a.vS,s.hU,s.W9,s.A9,s.lO,s.eU,s.iq,s.KW,s.uz,s.he,s.nf,s.ln,s.Gp,s.eP,s.ai,s.Je],styles:[".eDairyHeadderHomeIcon[_ngcontent-%COMP%]{width:50px;height:50px}ion-segment[_ngcontent-%COMP%]{margin-bottom:20px}ion-item[_ngcontent-%COMP%]{margin-bottom:10px}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}p[_ngcontent-%COMP%]{margin:5px 0}ion-icon[_ngcontent-%COMP%]{color:red}"]}),c})()}];let $=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.iI.forChild(L),f.iI]}),c})(),O=(()=>{var n;class c{}return(n=c).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[k.MD,a.YN,s.bv,$]}),c})()}}]);