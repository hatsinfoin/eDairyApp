"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6010],{6010:(B,v,s)=>{s.r(v),s.d(v,{HolidayListPageModule:()=>M});var u=s(177),r=s(4341),n=s(8974),f=s(3799),p=s(467),o=s(4438),F=s(4517),H=s(1626),L=s(7673),y=s(8141),m=s(9437),g=s(980),b=s(3366),D=s(5433),P=s(9732);let C=(()=>{var e;class d{constructor(i,t,l,c){this.apiService=i,this.http=t,this.appProp=l,this.loadingComponent=c,this.httpHeader={headers:new H.Lr({"Content-Type":"application/json"})},this.ipAddress=this.appProp.getHostName,this.getAllSchoolHolidaysApiURL=this.ipAddress+"/v1/holidayLists/getAllHollidays",this.getAllHolidaysByBranchIdURL=this.ipAddress+"/v1/holidayLists/getAllHolidaysByBranchId",this.saveSchoolHolidaysURL=this.ipAddress+"/v1/holidayLists/saveHolidaysList",this.deleteSchoolHolidaysApiURL=this.ipAddress+"/v1/holidayLists/deleteHoliday",this.editSchoolHolidaysApiURL=this.ipAddress+"/v1/holidayLists/editHoliday",this.ipAddress=l.getHostName}getAllHolidaysByBranchId(i){return this.loadingComponent.presentLoading("Fetching school holidays..."),console.log(this.getAllHolidaysByBranchIdURL+"/"+i),this.http.get(this.getAllHolidaysByBranchIdURL+"/"+i).pipe((0,y.M)(t=>console.log("Fetched all school holidays successfully.")),(0,m.W)(this.handleError("Error while getting school holidays")),(0,g.j)(()=>this.loadingComponent.dismissLoading()))}getSchoolHolidayList(){return this.loadingComponent.presentLoading("Fetching school holidays..."),this.http.get(this.getAllSchoolHolidaysApiURL).pipe((0,y.M)(i=>console.log("Fetched all school holidays successfully.")),(0,m.W)(this.handleError("Error while getting school holidays")),(0,g.j)(()=>this.loadingComponent.dismissLoading()))}saveSchoolHolidays(i){return this.loadingComponent.presentLoading("Saving school holidays..."),console.log("Calling saveSchoolHolidays: ",this.saveSchoolHolidaysURL),console.log(i),this.http.post(this.saveSchoolHolidaysURL,i).pipe((0,y.M)(t=>console.log("School holidays saved successfully.")),(0,m.W)(this.handleError("Error while saving school holidays")),(0,g.j)(()=>this.loadingComponent.dismissLoading()))}editSchoolHolidays(i){return this.loadingComponent.presentLoading("Editing school holidays..."),console.log("Calling editSchoolHolidays: ",this.editSchoolHolidaysApiURL),console.log(i),this.http.put(this.editSchoolHolidaysApiURL,i).pipe((0,y.M)(t=>console.log("School holidays edited successfully.")),(0,m.W)(this.handleError("Error while editing school holidays")),(0,g.j)(()=>this.loadingComponent.dismissLoading()))}deleteSchoolHolidays(i){return this.loadingComponent.presentLoading("Deleting school holidays..."),console.log("Calling deleteSchoolHolidays: ",this.deleteSchoolHolidaysApiURL+"/"+i),this.http.delete(this.deleteSchoolHolidaysApiURL+"/"+i).pipe((0,y.M)(t=>console.log("School holidays deleted successfully.")),(0,m.W)(this.handleError("Error while deleting school holidays")),(0,g.j)(()=>this.loadingComponent.dismissLoading()))}handleError(i="operation",t){return l=>(console.error(l),console.log(`${i} failed: ${l.message}`),(0,L.of)(t))}}return(e=d).\u0275fac=function(i){return new(i||e)(o.KVO(b.G),o.KVO(H.Qq),o.KVO(D.e),o.KVO(P.q))},e.\u0275prov=o.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),d})(),S=(()=>{var e;class d{constructor(i,t,l,c,h){this.alertController=i,this.navParams=t,this.fb=l,this.modalCtrl=c,this.holidaysService=h,this.receivedData=this.navParams.get("data"),console.log("this.receivedData "),console.log(this.receivedData),this.schoolHolidayForm=this.receivedData}ngOnInit(){null==this.receivedData?this.createForm():this.editForm()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.modalCtrl.dismiss(this.name,"confirm")}createForm(){this.schoolHolidayForm=this.fb.group({_id:[null],branchId:["NLR001",r.k0.required],holidayTitle:["",r.k0.required],holidayStartDate:["",r.k0.required],holidayEndDate:["",r.k0.required],holidayDiscription:["",r.k0.required]})}editForm(){this.schoolHolidayForm=this.fb.group({_id:[this.receivedData._id],branchId:[this.receivedData.branchId,r.k0.required],holidayTitle:[this.receivedData.holidayTitle,r.k0.required],holidayStartDate:[this.receivedData.holidayStartDate,r.k0.required],holidayEndDate:[this.receivedData.holidayEndDate,r.k0.required],holidayDiscription:[this.receivedData.holidayDiscription,r.k0.required]})}onSubmit(){this.schoolHolidayForm.valid?this.holidaysService.saveSchoolHolidays(this.schoolHolidayForm.value).subscribe(t=>{this.presentAlert("Successfuly Saved"),this.cancel()}):console.log(this.schoolHolidayForm.value)}presentAlert(i){var t=this;return(0,p.A)(function*(){yield(yield t.alertController.create({header:"Notification",message:i,buttons:["Action"]})).present()})()}}return(e=d).\u0275fac=function(i){return new(i||e)(o.rXU(n.hG),o.rXU(F.y8),o.rXU(r.ok),o.rXU(n.W3),o.rXU(C))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-holiday-form"]],inputs:{receivedData:"receivedData"},decls:34,vars:3,consts:[["slot","start"],["color","medium",3,"click"],[1,"ion-text-center","ion-align-items-center"],["slot","end"],[3,"click","strong"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","branchId"],["formControlName","holidayTitle"],["formControlName","holidayStartDate"],["formControlName","holidayEndDate"],["formControlName","holidayDiscription"],["expand","full","type","submit",3,"disabled"]],template:function(i,t){1&i&&(o.j41(0,"ion-content")(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",0)(4,"ion-button",1),o.bIt("click",function(){return t.cancel()}),o.EFF(5,"Cancel"),o.k0s()(),o.j41(6,"ion-title",2),o.EFF(7,"Holiday"),o.k0s(),o.j41(8,"ion-buttons",3)(9,"ion-button",4),o.bIt("click",function(){return t.confirm()}),o.EFF(10,"Confirm"),o.k0s()()()(),o.j41(11,"form",5),o.bIt("ngSubmit",function(){return t.onSubmit()}),o.j41(12,"ion-item")(13,"ion-label",6),o.EFF(14,"branch Id"),o.k0s(),o.nrm(15,"ion-input",7),o.k0s(),o.j41(16,"ion-item")(17,"ion-label",6),o.EFF(18,"holidayTitle"),o.k0s(),o.nrm(19,"ion-input",8),o.k0s(),o.j41(20,"ion-item")(21,"ion-label",6),o.EFF(22,"holidayStartDate"),o.k0s(),o.nrm(23,"ion-input",9),o.k0s(),o.j41(24,"ion-item")(25,"ion-label",6),o.EFF(26,"holidayEndDate"),o.k0s(),o.nrm(27,"ion-input",10),o.k0s(),o.j41(28,"ion-item")(29,"ion-label",6),o.EFF(30,"holidayDiscription "),o.k0s(),o.nrm(31,"ion-input",11),o.k0s(),o.j41(32,"ion-button",12),o.EFF(33,"Submit"),o.k0s()()()),2&i&&(o.R7$(9),o.Y8G("strong",!0),o.R7$(2),o.Y8G("formGroup",t.schoolHolidayForm),o.R7$(21),o.Y8G("disabled",!t.schoolHolidayForm.valid))},dependencies:[r.qT,r.BC,r.cb,n.Jm,n.QW,n.W9,n.eU,n.$w,n.uz,n.he,n.BC,n.ai,n.Gw,r.j4,r.JD]}),d})();var k=s(357);function I(e,d){if(1&e){const a=o.RV6();o.j41(0,"div",8)(1,"div",9)(2,"div",10),o.EFF(3),o.k0s(),o.j41(4,"div",11),o.EFF(5),o.nI1(6,"date"),o.k0s()(),o.j41(7,"div",12),o.EFF(8),o.k0s(),o.j41(9,"div",13)(10,"ion-icon",14),o.bIt("click",function(){const t=o.eBV(a).$implicit,l=o.XpG();return o.Njj(l.editSchoolHoliday(t))}),o.k0s(),o.j41(11,"ion-icon",15),o.bIt("click",function(){const t=o.eBV(a).$implicit,l=o.XpG();return o.Njj(l.duplicateSchoolHoliday(t))}),o.k0s(),o.j41(12,"ion-icon",16),o.bIt("click",function(){const t=o.eBV(a).$implicit,l=o.XpG();return o.Njj(l.deleteSchoolHoliday(t.id))}),o.k0s()()()}if(2&e){const a=d.$implicit;o.R7$(3),o.JRh(a.holidayTitle),o.R7$(2),o.JRh(o.i5U(6,3,a.holidayDate,"longDate")),o.R7$(3),o.SpI(" ",a.holidayDiscription," ")}}const A=[{path:"",component:(()=>{var e;class d{constructor(i,t,l,c){this.router=i,this.holidaysService=t,this.modalCtrl=l,this.storageService=c,this.message="This modal example uses the modalController to present and dismiss modals.",this.values=[],this.accordionGroupChange=h=>{const j=this.values.filter(U=>U!==h.detail.value);console.log(`Expanded: ${void 0===h.detail.value?"None":h.detail.value} | Collapsed: ${j.join(", ")}`)},this.imageUrl="https://schooledairyimagbucket.s3.ap-south-1.amazonaws.com/SchoolHomePage/SchooleDairyIcon.png"}ngOnInit(){this.getAllHolidaysByBranchId()}routePage(i){"landingPage"===i&&this.router.navigate(["tab1"])}openHolidayModal(){var i=this;return(0,p.A)(function*(){const t=yield i.modalCtrl.create({component:S});t.present();const{data:l,role:c}=yield t.onWillDismiss();"confirm"===c&&(i.message=`Hello, ${l}!`),i.getAllHolidaysByBranchId()})()}openEditHolidayModal(i){var t=this;return(0,p.A)(function*(){const l=yield t.modalCtrl.create({component:S,componentProps:{data:i}});l.present();const{data:c,role:h}=yield l.onWillDismiss();"confirm"===h&&(t.message=`Hello, ${c}!`),t.getAllHolidaysByBranchId()})()}iterateSchoolHolidays(i){for(const t of i)console.log(`Holiday Title: ${t._id}`),this.values.push(t._id)}reFetchAllHolidayList(){this.holidaysService.getSchoolHolidayList().subscribe(i=>{console.log(i),this.schoolHolidayList=i})}getAllHolidaysByBranchId(){var i=this;return(0,p.A)(function*(){const t=yield i.storageService.getStudentDetails();t&&i.holidaysService.getAllHolidaysByBranchId(t.branchId).subscribe(l=>{console.log(l),i.schoolHolidayList=l})})()}deleteSchoolHoliday(i){alert(i),this.holidaysService.deleteSchoolHolidays(i).subscribe(t=>{console.log(t),this.reFetchAllHolidayList()})}editSchoolHoliday(i){this.openEditHolidayModal(i)}duplicateSchoolHoliday(i){i._id=null,console.log("Duplicate"),console.log(i),this.openEditHolidayModal(i)}}return(e=d).\u0275fac=function(i){return new(i||e)(o.rXU(f.Ix),o.rXU(C),o.rXU(n.W3),o.rXU(k.n))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-holiday-list"]],decls:12,vars:3,consts:[[3,"translucent"],[1,"ion-align-items-center"],["size","2"],["src","../../assets/images/SchooleDairyIcon.png","aria-label","Home Icon",1,"eDairyHeaderIcon",3,"click"],["size","8",1,"ion-text-center"],[1,"page-title"],[1,"holiday-content",3,"fullscreen"],["class","holiday-card",4,"ngFor","ngForOf"],[1,"holiday-card"],[1,"card-header"],[1,"holiday-title"],[1,"holiday-date"],[1,"card-body"],[1,"card-actions"],["name","create","aria-label","Edit",1,"action-icon",3,"click"],["name","copy","aria-label","Duplicate",1,"action-icon",3,"click"],["name","trash","aria-label","Delete",1,"action-icon","danger-icon",3,"click"]],template:function(i,t){1&i&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-grid")(3,"ion-row",1)(4,"ion-col",2)(5,"ion-img",3),o.bIt("click",function(){return t.routePage("landingPage")}),o.k0s()(),o.j41(6,"ion-col",4)(7,"ion-title",5),o.EFF(8,"Holiday List"),o.k0s()(),o.nrm(9,"ion-col",2),o.k0s()()()(),o.j41(10,"ion-content",6),o.DNE(11,I,13,6,"div",7),o.k0s()),2&i&&(o.Y8G("translucent",!0),o.R7$(10),o.Y8G("fullscreen",!0),o.R7$(),o.Y8G("ngForOf",t.schoolHolidayList))},dependencies:[u.Sq,n.hU,n.W9,n.lO,n.eU,n.iq,n.KW,n.ln,n.BC,n.ai,u.vh],styles:[".holiday-content[_ngcontent-%COMP%]{--background: #f2f4f7;padding:1rem}.eDairyHeaderIcon[_ngcontent-%COMP%]{max-height:36px;max-width:36px;cursor:pointer}.page-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;color:#1f2d3d}.holiday-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:16px;margin-bottom:18px;box-shadow:0 4px 14px #0000000d;transition:transform .2s ease,box-shadow .2s ease}.holiday-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #00000014}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.card-header[_ngcontent-%COMP%]   .holiday-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:#2d3436}.card-header[_ngcontent-%COMP%]   .holiday-date[_ngcontent-%COMP%]{font-size:.95rem;color:#636e72}.card-body[_ngcontent-%COMP%]{font-size:1rem;color:#444;margin-bottom:12px;line-height:1.4}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.card-actions[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{font-size:20px;color:#4b5563;cursor:pointer;transition:color .2s ease}.card-actions[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]:hover{color:#1d4ed8}.card-actions[_ngcontent-%COMP%]   .danger-icon[_ngcontent-%COMP%]:hover{color:#dc2626}"]}),d})()}];let E=(()=>{var e;class d{}return(e=d).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[f.iI.forChild(A),f.iI]}),d})(),M=(()=>{var e;class d{}return(e=d).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[u.MD,r.YN,n.bv,E]}),d})()}}]);