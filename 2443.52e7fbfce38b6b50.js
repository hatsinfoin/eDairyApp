"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2443],{2443:(k,L,r)=>{r.r(L),r.d(L,{SchoolStudentLeavePageModule:()=>A});var u=r(177),v=r(4341),l=r(8974),p=r(3799);class F{constructor(s,o,t,a,i,d,m,S,M){this.leaveId=s,this.academicYear=o,this.standardId=t,this.branchId=a,this.leaveReason=i,this.leaveBy=d,this.leaveType=m,this.leaveStartDate=S,this.leaveEndDate=M}}var e=r(4438),f=r(1626),C=r(7673),c=r(8141),g=r(9437),h=r(980),y=r(3366),R=r(5433),P=r(9732);let D=(()=>{var n;class s{constructor(t,a,i,d){this.apiService=t,this.http=a,this.appProp=i,this.loadingComponent=d,this.httpHeader={headers:new f.Lr({"Content-Type":"application/json"})},this.ipAddress=this.appProp.getHostName,this.getAllStudentLeaveApiURL=this.ipAddress+"/v1/StudentLeave/getAllStudentLeave",this.getStudentLeaveByIdApiURL=this.ipAddress+"/v1/StudentLeave/searchByLeaveId",this.saveLeaveApiURL=this.ipAddress+"/v1/StudentLeave/saveStudentLeave",this.deleteLeaveApiURL=this.ipAddress+"/v1/StudentLeave/deleteLeave",this.editLeaveApiURL=this.ipAddress+"/v1/StudentLeave/saveStudentLeave",this.uploadLeaveProfileAPI=this.ipAddress+"/v1/StudentLeave/images/uploadLeaveFiles",this.ipAddress=i.getHostName}getAllStudentLeave(){return this.loadingComponent.presentLoading("Fetching student leave data..."),this.http.get(this.getAllStudentLeaveApiURL).pipe((0,c.M)(t=>console.log("Fetched all student leave data successfully.")),(0,g.W)(this.handleError("Error while getting student leave data")),(0,h.j)(()=>this.loadingComponent.dismissLoading()))}getStudentLeaveById(t){return this.loadingComponent.presentLoading("Fetching student leave details..."),this.http.get(this.getStudentLeaveByIdApiURL+"/"+t).pipe((0,c.M)(a=>console.log(`Fetched student leave data for ID: ${t}`)),(0,g.W)(this.handleError("Error while getting student leave by ID")),(0,h.j)(()=>this.loadingComponent.dismissLoading()))}saveStudentLeave(t){return console.log("Calling saveStudentLeave"),console.log(this.saveLeaveApiURL),console.log(t),this.loadingComponent.presentLoading("Saving student leave data..."),this.http.post(this.saveLeaveApiURL,t).pipe((0,c.M)(a=>console.log("Student leave data saved successfully.")),(0,g.W)(this.handleError("Error while saving student leave data")),(0,h.j)(()=>this.loadingComponent.dismissLoading()))}editStudentLeave(t){return console.log("Calling editStudentLeave"),console.log(this.editLeaveApiURL),console.log(t),this.loadingComponent.presentLoading("Editing student leave data..."),this.http.put(this.editLeaveApiURL,t).pipe((0,c.M)(a=>console.log("Student leave data edited successfully.")),(0,g.W)(this.handleError("Error while editing student leave data")),(0,h.j)(()=>this.loadingComponent.dismissLoading()))}deleteStudentLeave(t){return console.log("Calling deleteStudentLeave"),console.log(this.deleteLeaveApiURL+"/"+t),console.log(t),this.loadingComponent.presentLoading("Deleting student leave data..."),this.http.delete(this.deleteLeaveApiURL+"/"+t).pipe((0,c.M)(a=>console.log("Student leave data deleted successfully.")),(0,g.W)(this.handleError("Error while deleting student leave data")),(0,h.j)(()=>this.loadingComponent.dismissLoading()))}handleError(t="operation",a){return i=>(console.error(i),console.log(`${t} failed: ${i.message}`),(0,C.of)(a))}uploadStudentLeaveProfile(t){console.log("Calling uploadStudentLeaveProfile"),console.log(this.uploadLeaveProfileAPI),console.log(t);const a=new FormData;for(let i=0;i<t.length;i++)a.append("files",t[i]);return this.loadingComponent.presentLoading("Uploading student leave profile..."),this.http.post(this.uploadLeaveProfileAPI,a).pipe((0,c.M)(i=>console.log("Student leave profile uploaded successfully.")),(0,g.W)(this.handleError("Error while uploading student leave profile")),(0,h.j)(()=>this.loadingComponent.dismissLoading()))}}return(n=s).\u0275fac=function(t){return new(t||n)(e.KVO(y.G),e.KVO(f.Qq),e.KVO(R.e),e.KVO(P.q))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),s})();function j(n,s){if(1&n){const o=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Leave Application"),e.k0s()(),e.j41(4,"ion-card-content")(5,"form",8),e.bIt("ngSubmit",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.submitLeaveForm())}),e.j41(6,"ion-item")(7,"ion-label",9),e.EFF(8,"Leave Reason"),e.k0s(),e.j41(9,"ion-input",10),e.mxI("ngModelChange",function(a){e.eBV(o);const i=e.XpG();return e.DH7(i.leaveForm.leaveReason,a)||(i.leaveForm.leaveReason=a),e.Njj(a)}),e.k0s()(),e.j41(10,"ion-item")(11,"ion-select",11),e.mxI("ngModelChange",function(a){e.eBV(o);const i=e.XpG();return e.DH7(i.leaveForm.leaveType,a)||(i.leaveForm.leaveType=a),e.Njj(a)}),e.j41(12,"ion-select-option",12),e.EFF(13,"Casual"),e.k0s(),e.j41(14,"ion-select-option",13),e.EFF(15,"Sick"),e.k0s(),e.j41(16,"ion-select-option",14),e.EFF(17,"Other"),e.k0s()()(),e.j41(18,"ion-item")(19,"ion-label",9),e.EFF(20,"Leave Start Date"),e.k0s(),e.j41(21,"ion-datetime",15),e.mxI("ngModelChange",function(a){e.eBV(o);const i=e.XpG();return e.DH7(i.leaveForm.leaveStartDate,a)||(i.leaveForm.leaveStartDate=a),e.Njj(a)}),e.k0s()(),e.j41(22,"ion-item")(23,"ion-label",9),e.EFF(24,"Leave End Date"),e.k0s(),e.j41(25,"ion-datetime",16),e.mxI("ngModelChange",function(a){e.eBV(o);const i=e.XpG();return e.DH7(i.leaveForm.leaveEndDate,a)||(i.leaveForm.leaveEndDate=a),e.Njj(a)}),e.k0s()(),e.j41(26,"ion-button",17),e.EFF(27," Submit Leave "),e.k0s()()()()}if(2&n){const o=e.XpG();e.R7$(9),e.R50("ngModel",o.leaveForm.leaveReason),e.R7$(2),e.R50("ngModel",o.leaveForm.leaveType),e.R7$(10),e.R50("ngModel",o.leaveForm.leaveStartDate),e.R7$(4),e.R50("ngModel",o.leaveForm.leaveEndDate),e.R7$(),e.Y8G("disabled",!(o.leaveForm.leaveReason&&o.leaveForm.leaveType&&o.leaveForm.leaveStartDate&&o.leaveForm.leaveEndDate))}}function E(n,s){if(1&n&&(e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.nI1(4,"date"),e.nI1(5,"date"),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()),2&n){const o=s.$implicit;e.R7$(3),e.E5c("",o.leaveType," (",e.i5U(4,5,o.leaveStartDate,"shortDate")," - ",e.i5U(5,8,o.leaveEndDate,"shortDate"),")"),e.R7$(4),e.JRh(o.leaveReason),e.R7$(2),e.SpI("Applied by: ",o.leaveBy,"")}}function _(n,s){if(1&n&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Leave History"),e.k0s()(),e.j41(4,"ion-card-content")(5,"ion-list"),e.DNE(6,E,10,11,"ion-item",18),e.k0s()()()),2&n){const o=e.XpG();e.R7$(6),e.Y8G("ngForOf",o.stdleaveHistory)}}const I=[{path:"",component:(()=>{var n;class s{ngOnInit(){this.reFetchAllHomeworkList()}constructor(t,a){this.stdLeaveService=t,this.router=a,this.segment="leaveForm",this.leaveForm=new F("","","","","","","Casual",(new Date).toISOString().split("T")[0],this.getNextDayDate())}submitLeaveForm(){console.log("Leave Form Submitted",this.leaveForm);const t="L"+Math.floor(1e3*Math.random()),S=new F(t,"2023-2024","9","B",this.leaveForm.leaveReason,"John Doe",this.leaveForm.leaveType,this.leaveForm.leaveStartDate,this.leaveForm.leaveEndDate);this.stdleaveHistory.unshift(S),this.stdLeaveService.saveStudentLeave(this.leaveForm).subscribe(M=>{this.reFetchAllHomeworkList()}),this.segment="leaveHistory"}reFetchAllHomeworkList(){this.stdLeaveService.getAllStudentLeave().subscribe(t=>{console.log(t),this.stdleaveHistory=t})}getNextDayDate(){const t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}routePage(t){"landingPage"===t&&this.router.navigate(["tab1"])}}return(n=s).\u0275fac=function(t){return new(t||n)(e.rXU(D),e.rXU(p.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-school-student-leave"]],decls:17,vars:5,consts:[[3,"translucent"],["src","../../assets/images/SchooleDairyIcon.png",1,"eDairyHeadderHomeIcon",3,"click"],["size","8",1,"custom-col","ion-text-center"],[3,"fullscreen"],["value","leaveForm",3,"ngModelChange","ngModel"],["value","leaveForm"],["value","leaveHistory"],[4,"ngIf"],[3,"ngSubmit"],["position","stacked"],["aria-label","leaveReason","name","leaveReason","required","",3,"ngModelChange","ngModel"],["name","leaveType","label","Leave Type","required","",3,"ngModelChange","ngModel"],["value","Casual"],["value","Sick"],["value","Other"],["aria-label","leaveStartDate","name","leaveStartDate","required","",3,"ngModelChange","ngModel"],["aria-label","leaveEndDate","name","leaveEndDate","required","",3,"ngModelChange","ngModel"],["expand","full","type","submit",3,"disabled"],[4,"ngFor","ngForOf"]],template:function(t,a){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-grid")(3,"ion-row")(4,"ion-col")(5,"ion-img",1),e.bIt("click",function(){return a.routePage("landingPage")}),e.k0s()(),e.j41(6,"ion-col",2),e.EFF(7,"Student Leave"),e.k0s(),e.nrm(8,"ion-col"),e.k0s()()()(),e.j41(9,"ion-content",3)(10,"ion-segment",4),e.mxI("ngModelChange",function(d){return e.DH7(a.segment,d)||(a.segment=d),d}),e.j41(11,"ion-segment-button",5),e.EFF(12," Leave Form "),e.k0s(),e.j41(13,"ion-segment-button",6),e.EFF(14," Leave History "),e.k0s()(),e.DNE(15,j,28,5,"ion-card",7)(16,_,7,1,"ion-card",7),e.k0s()),2&t&&(e.Y8G("translucent",!0),e.R7$(9),e.Y8G("fullscreen",!0),e.R7$(),e.R50("ngModel",a.segment),e.R7$(5),e.Y8G("ngIf","leaveForm"===a.segment),e.R7$(),e.Y8G("ngIf","leaveHistory"===a.segment))},dependencies:[u.Sq,u.bT,v.qT,v.BC,v.cb,v.YS,v.vS,v.cV,l.Jm,l.b_,l.I9,l.ME,l.tN,l.hU,l.W9,l.A9,l.lO,l.eU,l.KW,l.$w,l.uz,l.he,l.nf,l.ln,l.Gp,l.eP,l.Nm,l.Ip,l.ai,l.Je,l.Gw,u.vh],styles:[".eDairyHeadderHomeIcon[_ngcontent-%COMP%]{width:50px;height:50px}ion-card[_ngcontent-%COMP%]{margin:10px}ion-segment[_ngcontent-%COMP%]{margin-top:20px}ion-datetime[_ngcontent-%COMP%]{--background: rgb(245, 235, 247);--background-rgb: 245, 235, 247;--wheel-highlight-background: rgb(218, 216, 255);--wheel-highlight-border-radius: 48px;--wheel-fade-background-rgb: 245, 235, 247}ion-datetime[_ngcontent-%COMP%]::part(wheel-item){color:#ff4261}ion-datetime[_ngcontent-%COMP%]::part(wheel-item   active)[_ngcontent-%COMP%]{color:#801eab}"]}),s})()}];let b=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[p.iI.forChild(I),p.iI]}),s})(),A=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[u.MD,v.YN,l.bv,b]}),s})()}}]);