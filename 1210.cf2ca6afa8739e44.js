"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1210],{1210:(R,v,a)=>{a.r(v),a.d(v,{NoticeBoardPageModule:()=>I});var B=a(177),c=a(4341),r=a(8974),u=a(3799),g=a(467);class S{constructor(){this._sendMessage=""}get sendMessage(){return this._sendMessage}set sendMessage(l){this._sendMessage=l}}var e=a(4438),k=a(4517),N=a(1626),D=a(7673),m=a(8141),h=a(9437),p=a(980),M=a(3366),E=a(5433),P=a(9732);let F=(()=>{var i;class l{constructor(o,t,n,d){this.apiService=o,this.http=t,this.appProp=n,this.loadingComponent=d,this.httpHeader={headers:new N.Lr({"Content-Type":"application/json"})},this.ipAddress=this.appProp.getHostName,this.getAllApiURL=this.ipAddress+"/v1/noticeboard/getAllNotices",this.schoolNoticeBoardOfBranchURL=this.ipAddress+"/v1/noticeboard/getNoticeBoardsByBranchId",this.saveApiURL=this.ipAddress+"/v1/noticeboard/saveNoticeBoard",this.deleteApiURL=this.ipAddress+"/v1/noticeboard/deleteNoticeBoardsByID",this.editApiURL=this.ipAddress+"/v1/noticeboard/editEvent",this.communicationServiceURL=this.ipAddress+"/v1/commonUtil/sendWhatAppMessage",this.sendWhatAppMessagegetAPI=this.ipAddress+"/v1/commonUtil/sendWhatAppMessageget",this.ipAddress=n.getHostName,console.log(this.ipAddress)}getSchoolNoticeBoard(){return this.loadingComponent.presentLoading("Fetching school notice board..."),this.http.get(this.getAllApiURL).pipe((0,m.M)(o=>console.log("Fetched all school events successfully.")),(0,h.W)(this.handleError("Error while getting school events")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}getSchoolNoticeBoardOfBranch(o){return this.loadingComponent.presentLoading("Fetching school notice board..."),console.log(this.schoolNoticeBoardOfBranchURL+"/"+o),this.http.get(this.schoolNoticeBoardOfBranchURL+"/"+o).pipe((0,m.M)(t=>console.log("Fetched all school events successfully.")),(0,h.W)(this.handleError("Error while getting school events")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}saveSchoolNoticeBoard(o){return this.loadingComponent.presentLoading("Saving school notice board..."),this.http.post(this.saveApiURL,o).pipe((0,m.M)(t=>console.log("School notice board saved successfully.")),(0,h.W)(this.handleError("Error while saving school notice board")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}editSchoolNoticeBoard(o){return this.loadingComponent.presentLoading("Editing school notice board..."),this.http.put(this.saveApiURL,o).pipe((0,m.M)(t=>console.log("School notice board edited successfully.")),(0,h.W)(this.handleError("Error while editing school notice board")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}deleteSchoolNoticeBoard(o){return this.loadingComponent.presentLoading("Deleting school notice board..."),this.http.delete(`${this.deleteApiURL}/${o}`).pipe((0,m.M)(t=>console.log("School notice board deleted successfully.")),(0,h.W)(this.handleError("Error while deleting school notice board")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}sendCommunicaitonMessage(o){return this.loadingComponent.presentLoading("Sending communication message..."),this.http.post(this.communicationServiceURL,o).pipe((0,m.M)(t=>console.log("Communication message sent successfully.")),(0,h.W)(this.handleError("Error while sending communication message")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}handleError(o="operation",t){return n=>(console.error(n),console.log(`${o} failed: ${n.message}`),(0,D.of)(t))}}return(i=l).\u0275fac=function(o){return new(o||i)(e.KVO(M.G),e.KVO(N.Qq),e.KVO(E.e),e.KVO(P.q))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),l})(),b=(()=>{var i;class l{constructor(o,t,n,d,f){this.alertController=o,this.navParams=t,this.fb=n,this.modalCtrl=d,this.noticeBoardService=f,this.receivedData=this.navParams.get("data"),console.log("this.receivedData "),console.log(this.receivedData),this.noticeBoardForm=this.receivedData}ngOnInit(){null==this.receivedData?this.createForm():this.editForm()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.modalCtrl.dismiss(this.name,"confirm")}createForm(){this.noticeBoardForm=this.fb.group({_id:[null],branchId:["NLR001",c.k0.required],id:["",c.k0.required],noticeDepartment:["",c.k0.required],noticeTitle:["",c.k0.required],noticeDetails:["",c.k0.required],noticeBy:["",c.k0.required],noticeStartDate:["",c.k0.required],noticeEndDate:["",c.k0.required]})}editForm(){this.noticeBoardForm=this.fb.group({_id:[this.receivedData._id],id:[this.receivedData.id],branchId:[this.receivedData.branchId,c.k0.required],noticeDepartment:[this.receivedData.noticeDepartment,c.k0.required],noticeTitle:[this.receivedData.noticeTitle,c.k0.required],noticeDetails:[this.receivedData.noticeDetails,c.k0.required],noticeBy:[this.receivedData.noticeBy,c.k0.required],noticeStartDate:[this.receivedData.noticeStartDate,c.k0.required],noticeEndDate:[this.receivedData.noticeEndDate,c.k0.required]})}onSubmit(){this.noticeBoardForm.valid?this.noticeBoardService.saveSchoolNoticeBoard(this.noticeBoardForm.value).subscribe(t=>{this.presentAlert("Successfuly Saved"),this.cancel()}):console.log(this.noticeBoardForm.value)}presentAlert(o){var t=this;return(0,g.A)(function*(){yield(yield t.alertController.create({header:"Notification",message:o,buttons:["Action"]})).present()})()}}return(i=l).\u0275fac=function(o){return new(o||i)(e.rXU(r.hG),e.rXU(k.y8),e.rXU(c.ok),e.rXU(r.W3),e.rXU(F))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-notification-form"]],inputs:{receivedData:"receivedData"},decls:36,vars:3,consts:[["slot","start"],[2,"text-align","center"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","noticeDepartment"],["formControlName","noticeTitle"],["formControlName","noticeDetails"],["formControlName","noticeBy"],["formControlName","noticeStartDate"],["formControlName","noticeEndDate"],["expand","full","type","submit",3,"disabled"]],template:function(o,t){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar"),e.nrm(2,"ion-buttons",0),e.j41(3,"ion-title",1),e.EFF(4,"Notice Board"),e.k0s(),e.j41(5,"ion-buttons",2)(6,"ion-button",3),e.bIt("click",function(){return t.confirm()}),e.EFF(7,"Close"),e.k0s()()()(),e.j41(8,"ion-content",4)(9,"form",5),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(10,"ion-item")(11,"ion-label",6),e.EFF(12,"noticeDepartment"),e.k0s(),e.nrm(13,"ion-input",7),e.k0s(),e.j41(14,"ion-item")(15,"ion-label",6),e.EFF(16,"noticeTitle"),e.k0s(),e.nrm(17,"ion-input",8),e.k0s(),e.j41(18,"ion-item")(19,"ion-label",6),e.EFF(20,"noticeDetails"),e.k0s(),e.nrm(21,"ion-input",9),e.k0s(),e.j41(22,"ion-item")(23,"ion-label",6),e.EFF(24,"noticeBy "),e.k0s(),e.nrm(25,"ion-input",10),e.k0s(),e.j41(26,"ion-item")(27,"ion-label",6),e.EFF(28,"noticeStartDate "),e.k0s(),e.nrm(29,"ion-input",11),e.k0s(),e.j41(30,"ion-item")(31,"ion-label",6),e.EFF(32,"noticeEndDate"),e.k0s(),e.nrm(33,"ion-input",12),e.k0s(),e.j41(34,"ion-button",13),e.EFF(35,"Submit"),e.k0s()()()),2&o&&(e.R7$(6),e.Y8G("strong",!0),e.R7$(3),e.Y8G("formGroup",t.noticeBoardForm),e.R7$(25),e.Y8G("disabled",!t.noticeBoardForm.valid))},dependencies:[c.qT,c.BC,c.cb,r.Jm,r.QW,r.W9,r.eU,r.$w,r.uz,r.he,r.BC,r.ai,r.Gw,c.j4,c.JD]}),l})();var y=a(357);function _(i,l){if(1&i){const s=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5),e.k0s(),e.j41(6,"ion-card-subtitle"),e.EFF(7),e.k0s(),e.j41(8,"ion-card-subtitle"),e.EFF(9),e.k0s(),e.j41(10,"ion-card-subtitle"),e.EFF(11),e.k0s(),e.j41(12,"ion-card-subtitle"),e.EFF(13),e.k0s()(),e.j41(14,"ion-card-content"),e.EFF(15),e.k0s(),e.j41(16,"ion-item")(17,"ion-icon",7),e.bIt("click",function(){const t=e.eBV(s).$implicit,n=e.XpG();return e.Njj(n.sendCommunicaitonMessage(t.noticeDetails))}),e.k0s(),e.j41(18,"ion-icon",8),e.bIt("click",function(){const t=e.eBV(s).$implicit,n=e.XpG();return e.Njj(n.editSchoolNoticeBoard(t))}),e.k0s(),e.j41(19,"ion-icon",9),e.bIt("click",function(){const t=e.eBV(s).$implicit,n=e.XpG();return e.Njj(n.duplicateSchoolNoticeBoard(t))}),e.k0s(),e.j41(20,"ion-icon",10),e.bIt("click",function(){const t=e.eBV(s).$implicit,n=e.XpG();return e.Njj(n.deleteSchoolEvent(t.id))}),e.k0s()()()}if(2&i){const s=l.$implicit;e.R7$(3),e.SpI("Notice Title : ",s.noticeTitle,""),e.R7$(2),e.SpI("Notice Department : ",s.noticeDepartment,""),e.R7$(2),e.SpI("Notice By : ",s.noticeBy,""),e.R7$(2),e.SpI("Notice Start Date: ",s.noticeStartDate,""),e.R7$(2),e.SpI("Notice End Date: ",s.noticeEndDate,""),e.R7$(2),e.SpI("Notice Id ",s.id,""),e.R7$(2),e.SpI(" ",s.noticeDetails," ")}}const j=[{path:"",component:(()=>{var i;class l{constructor(o,t,n,d){this.router=o,this.noticeBoardService=t,this.modalCtrl=n,this.storageService=d,this.message="This modal example uses the modalController to present and dismiss modals."}ngOnInit(){this.reFetchAllNoticeBoard()}routePage(o){"landingPage"===o&&this.router.navigate(["tab1"])}reFetchAllNoticeBoard(){var o=this;return(0,g.A)(function*(){const t=yield o.storageService.getStudentDetails();t&&o.noticeBoardService.getSchoolNoticeBoardOfBranch(t.branchId).subscribe(n=>{console.log(n),o.schoolNoticeBoardList=n},n=>{n.error instanceof ErrorEvent?alert("An error occurred:"+n.error.message):alert(`Backend returned code ${n.status}, body was: ${n.error}`)})})()}deleteSchoolEvent(o){this.noticeBoardService.deleteSchoolNoticeBoard(o).subscribe(t=>{console.log(t),this.reFetchAllNoticeBoard()})}editSchoolNoticeBoard(o){this.openEditEventModal(o)}duplicateSchoolNoticeBoard(o){o._id=null,o.id=null,console.log("Duplicate"),console.log(o),this.openEditEventModal(o)}openEditEventModal(o){var t=this;return(0,g.A)(function*(){const n=yield t.modalCtrl.create({component:b,componentProps:{data:o}});n.present();const{data:d,role:f}=yield n.onWillDismiss();"confirm"===f&&(t.message=`Hello, ${d}!`),t.reFetchAllNoticeBoard()})()}openEventModal(){var o=this;return(0,g.A)(function*(){const t=yield o.modalCtrl.create({component:b});t.present();const{data:n,role:d}=yield t.onWillDismiss();"confirm"===d&&(o.message=`Hello, ${n}!`),o.reFetchAllNoticeBoard()})()}sendCommunicaitonMessage(o){const t=new S;t.sendMessage=o,this.noticeBoardService.sendCommunicaitonMessage(t).subscribe(n=>{console.log(n)})}}return(i=l).\u0275fac=function(o){return new(o||i)(e.rXU(u.Ix),e.rXU(F),e.rXU(r.W3),e.rXU(y.n))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-notice-board"]],decls:15,vars:3,consts:[[3,"translucent"],["src","../../assets/images/SchooleDairyIcon.png",1,"eDairyHeadderHomeIcon",3,"click"],["size","8",1,"custom-col","ion-text-center"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngFor","ngForOf"],["slot","end","expand","block","name","notifications",3,"click"],["slot","end","expand","block","name","create",3,"click"],["slot","end","expand","block","name","copy",3,"click"],["slot","end","expand","block","name","trash",3,"click"]],template:function(o,t){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-grid")(3,"ion-row")(4,"ion-col")(5,"ion-img",1),e.bIt("click",function(){return t.routePage("landingPage")}),e.k0s()(),e.j41(6,"ion-col",2),e.EFF(7,"noticeBoard"),e.k0s(),e.nrm(8,"ion-col"),e.k0s()()()(),e.j41(9,"ion-content",3)(10,"ion-header",4)(11,"ion-toolbar")(12,"ion-title",5),e.EFF(13,"noticeBoard"),e.k0s()()(),e.DNE(14,_,21,7,"ion-card",6),e.k0s()),2&o&&(e.Y8G("translucent",!0),e.R7$(9),e.Y8G("fullscreen",!0),e.R7$(5),e.Y8G("ngForOf",t.schoolNoticeBoardList))},dependencies:[B.Sq,r.b_,r.I9,r.ME,r.HW,r.tN,r.hU,r.W9,r.lO,r.eU,r.iq,r.KW,r.uz,r.ln,r.BC,r.ai],styles:[".eDairyHeadderHomeIcon[_ngcontent-%COMP%]{width:50px;height:50px}ion-item[_ngcontent-%COMP%]{border:1px solid lightgray;margin:2px;border-radius:10px}ion-item[_ngcontent-%COMP%]   .ttl[_ngcontent-%COMP%]   .sub_heading[_ngcontent-%COMP%]{margin:5px 0;color:#000;font-size:15px}ion-item[_ngcontent-%COMP%]   .ttl[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:10px;color:gray}ion-item[_ngcontent-%COMP%]   .content_button[_ngcontent-%COMP%]{height:30px;width:80px;margin:0;--border-radius: 30px;color:#fff;font-size:10px}ion-item[_ngcontent-%COMP%]   .scnd_lbl[_ngcontent-%COMP%]{font-size:10px}.workout[_ngcontent-%COMP%]   .bold_lbl[_ngcontent-%COMP%]{margin-bottom:10px;font-size:18px;font-family:bold}.workout[_ngcontent-%COMP%]   .smpl_lbl[_ngcontent-%COMP%]{font-size:12px;padding:0;margin:0}ion-icon[_ngcontent-%COMP%]{color:red}"]}),l})()}];let A=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.iI.forChild(j),u.iI]}),l})(),I=(()=>{var i;class l{}return(i=l).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[B.MD,c.YN,r.bv,A]}),l})()}}]);