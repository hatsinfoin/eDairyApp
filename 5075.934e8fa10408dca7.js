"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5075],{5075:(N,_,s)=>{s.r(_),s.d(_,{EDairyPageModule:()=>U});var h=s(177),E=s(4341),d=s(8974),y=s(3799),m=s(467),i=s(4438),D=s(1626),f=s(7673),l=s(8141),g=s(9437),p=s(980),v=s(3366),F=s(5433),b=s(9732);let P=(()=>{var e;class a{constructor(t,r,o,c){this.apiService=t,this.http=r,this.appProp=o,this.loadingComponent=c,this.httpHeader={headers:new D.Lr({"Content-Type":"application/json"})},this.ipAddress=this.appProp.getHostName,this.getAllEDairyApiURL=this.ipAddress+"/v1/eDairy/getAllEDairy",this.getEDairyByBranchIdURL=this.ipAddress+"/v1/eDairy/getEDairyByBranchId",this.getEDairyByDateURL=this.ipAddress+"/v1/eDairy/getEDairyByDate",this.saveEDairyURL=this.ipAddress+"/v1/eDairy/saveEDairy",this.deleteEDairyApiURL=this.ipAddress+"/v1/eDairy/deleteEDairy",this.editEDairyApiURL=this.ipAddress+"/v1/eDairy/editEDairy",this.ipAddress=o.getHostName}getAllEDairy(){return this.loadingComponent.presentLoading("Fetching eDairy..."),this.http.get(this.getAllEDairyApiURL).pipe((0,l.M)(t=>console.log("Fetched all eDairy entries successfully.")),(0,g.W)(this.handleError("Error while getting eDairy")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}getAllEDairyByBranchId(t){return this.loadingComponent.presentLoading("Fetching eDairy by branch..."),this.http.get(`${this.getEDairyByBranchIdURL}/${t}`).pipe((0,l.M)(r=>console.log("Fetched eDairy by branch successfully.")),(0,g.W)(this.handleError("Error while getting eDairy by branch")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}getEDairyByDate(t){return this.loadingComponent.presentLoading("Fetching eDairy by date..."),this.http.get(`${this.getEDairyByDateURL}/${t}`).pipe((0,l.M)(r=>console.log("Fetched eDairy by date successfully.")),(0,g.W)(this.handleError("Error while getting eDairy by date")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}saveEDairy(t){return this.loadingComponent.presentLoading("Saving eDairy..."),this.http.post(this.saveEDairyURL,t,this.httpHeader).pipe((0,l.M)(r=>console.log("eDairy saved successfully.")),(0,g.W)(this.handleError("Error while saving eDairy")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}editEDairy(t){return this.loadingComponent.presentLoading("Editing eDairy..."),this.http.put(this.editEDairyApiURL,t,this.httpHeader).pipe((0,l.M)(r=>console.log("eDairy edited successfully.")),(0,g.W)(this.handleError("Error while editing eDairy")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}deleteEDairy(t){return this.loadingComponent.presentLoading("Deleting eDairy..."),this.http.post(`${this.deleteEDairyApiURL}/${t}`,{},this.httpHeader).pipe((0,l.M)(r=>console.log("eDairy deleted successfully.")),(0,g.W)(this.handleError("Error while deleting eDairy")),(0,p.j)(()=>this.loadingComponent.dismissLoading()))}handleError(t="operation",r){return o=>(console.error(o),console.log(`${t} failed: ${o.message}`),(0,f.of)(r))}}return(e=a).\u0275fac=function(t){return new(t||e)(i.KVO(v.G),i.KVO(D.Qq),i.KVO(F.e),i.KVO(b.q))},e.\u0275prov=i.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),a})();var x=s(357);function R(e,a){if(1&e&&(i.j41(0,"ion-item")(1,"ion-label")(2,"a",6),i.EFF(3),i.k0s(),i.j41(4,"p"),i.EFF(5),i.k0s()()()),2&e){const n=a.$implicit,t=i.XpG(4);i.R7$(2),i.Y8G("href",n.fileUrl,i.B4B),i.R7$(),i.JRh(n.fileName),i.R7$(2),i.SpI("Uploaded: ",t.formatDate(n.uploadedOn),"")}}function $(e,a){if(1&e&&(i.j41(0,"div")(1,"h5"),i.EFF(2,"Attachments"),i.k0s(),i.j41(3,"ion-list"),i.DNE(4,R,6,3,"ion-item",3),i.k0s()()),2&e){const n=i.XpG(2).$implicit;i.R7$(4),i.Y8G("ngForOf",n.eDairyDetails.attachments)}}function C(e,a){if(1&e&&(i.j41(0,"ion-item")(1,"ion-label")(2,"h6"),i.EFF(3),i.nI1(4,"titlecase"),i.k0s(),i.j41(5,"p"),i.EFF(6),i.k0s(),i.j41(7,"small"),i.EFF(8),i.k0s()()()),2&e){const n=a.$implicit,t=i.XpG(4);i.R7$(3),i.Lme("",i.bMT(4,4,n.userRole)," (",n.userId,")"),i.R7$(3),i.JRh(n.commentText),i.R7$(2),i.JRh(t.formatDate(n.timestamp))}}function M(e,a){if(1&e&&(i.j41(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),i.EFF(4,"General Comments"),i.k0s()(),i.j41(5,"ion-card-content")(6,"ion-list"),i.DNE(7,C,9,6,"ion-item",3),i.k0s()()()()),2&e){const n=i.XpG(2).$implicit;i.R7$(7),i.Y8G("ngForOf",n.comments)}}function j(e,a){if(1&e&&(i.j41(0,"div")(1,"p")(2,"strong"),i.EFF(3,"Grade:"),i.k0s(),i.EFF(4),i.k0s(),i.j41(5,"p")(6,"strong"),i.EFF(7,"Feedback:"),i.k0s(),i.EFF(8),i.k0s()()),2&e){const n=i.XpG().$implicit;i.R7$(4),i.Lme(" ",n.submission.grade.marks,"/",n.submission.grade.maxMarks,""),i.R7$(4),i.SpI(" ",n.submission.grade.feedback,"")}}function I(e,a){if(1&e&&(i.j41(0,"li")(1,"a",6),i.EFF(2),i.k0s()()),2&e){const n=a.$implicit;i.R7$(),i.Y8G("href",n.fileUrl,i.B4B),i.R7$(),i.JRh(n.fileName)}}function O(e,a){if(1&e&&(i.j41(0,"div")(1,"p"),i.EFF(2,"Attachments:"),i.k0s(),i.j41(3,"ul"),i.DNE(4,I,3,2,"li",3),i.k0s()()),2&e){const n=i.XpG().$implicit;i.R7$(4),i.Y8G("ngForOf",n.attachments)}}function k(e,a){if(1&e&&(i.j41(0,"ion-item")(1,"ion-label")(2,"h6"),i.EFF(3),i.k0s(),i.j41(4,"p"),i.EFF(5),i.k0s(),i.j41(6,"small"),i.EFF(7),i.k0s(),i.DNE(8,O,5,1,"div",5),i.k0s()()),2&e){const n=a.$implicit,t=i.XpG(5);i.R7$(3),i.Lme("",n.userName," (",n.userType,")"),i.R7$(2),i.JRh(n.comment),i.R7$(2),i.JRh(t.formatDate(n.timestamp)),i.R7$(),i.Y8G("ngIf",null==n.attachments?null:n.attachments.length)}}function L(e,a){if(1&e&&(i.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),i.EFF(3),i.nI1(4,"titlecase"),i.k0s(),i.j41(5,"ion-card-subtitle"),i.EFF(6),i.k0s()(),i.j41(7,"ion-card-content"),i.DNE(8,j,9,3,"div",5),i.j41(9,"h6"),i.EFF(10,"Comments:"),i.k0s(),i.j41(11,"ion-list"),i.DNE(12,k,9,5,"ion-item",3),i.k0s()()()),2&e){const n=a.$implicit,t=i.XpG(4);i.R7$(3),i.Lme(" ",n.studentName," - ",i.bMT(4,5,n.submission.status)," "),i.R7$(3),i.SpI(" Submitted: ",t.formatDate(n.submission.submittedDate)," "),i.R7$(2),i.Y8G("ngIf",n.submission.grade),i.R7$(4),i.Y8G("ngForOf",n.submission.comments)}}function G(e,a){if(1&e&&(i.j41(0,"div"),i.DNE(1,L,13,7,"ion-card",3),i.k0s()),2&e){const n=i.XpG(2).$implicit;i.R7$(),i.Y8G("ngForOf",n.studentSubmissions)}}function A(e,a){if(1&e&&(i.j41(0,"ion-card-content")(1,"p"),i.EFF(2),i.k0s(),i.DNE(3,$,5,1,"div",5)(4,M,8,1,"div",5)(5,G,2,1,"div",5),i.k0s()),2&e){const n=i.XpG().$implicit;i.R7$(2),i.JRh(null==n.eDairyDetails?null:n.eDairyDetails.description),i.R7$(),i.Y8G("ngIf",null==n.eDairyDetails||null==n.eDairyDetails.attachments?null:n.eDairyDetails.attachments.length),i.R7$(),i.Y8G("ngIf",null==n.comments?null:n.comments.length),i.R7$(),i.Y8G("ngIf",null==n.studentSubmissions?null:n.studentSubmissions.length)}}function B(e,a){if(1&e){const n=i.RV6();i.j41(0,"ion-card")(1,"ion-card-header",4),i.bIt("click",function(){const r=i.eBV(n).$implicit,o=i.XpG();return i.Njj(o.toggleExpand(r.id))}),i.j41(2,"ion-card-title"),i.EFF(3),i.k0s(),i.j41(4,"ion-card-subtitle"),i.EFF(5),i.k0s()(),i.DNE(6,A,6,4,"ion-card-content",5),i.k0s()}if(2&e){const n=a.$implicit,t=i.XpG();i.R7$(3),i.JRh(null==n.eDairyDetails?null:n.eDairyDetails.title),i.R7$(2),i.JRh(t.formatDate(n.dateOfAssignment)),i.R7$(),i.Y8G("ngIf",t.isExpanded(n.id))}}const S=[{path:"",component:(()=>{var e;class a{constructor(t,r,o,c){this.router=t,this.edairyService=r,this.modalCtrl=o,this.storageService=c,this.eDairyList=[],this.values=[],this.expandedItemId=null}ngOnInit(){this.getAllEDairyDetails()}routePage(t){"landingPage"===t&&this.router.navigate(["tab1"])}accordionGroupChange(t){const r=this.values.filter(c=>c!==t.detail.value),o=t.detail.value;console.log(`Expanded: ${void 0===o?"None":o} | Collapsed: ${r.join(", ")}`)}openEDairyModal(){return(0,m.A)(function*(){})()}openEditEDairyModal(t){return(0,m.A)(function*(){})()}getAllEDairyByBranchId(){var t=this;return(0,m.A)(function*(){const r=yield t.storageService.getStudentDetails();null!=r&&r.branchId&&t.edairyService.getAllEDairyByBranchId(r.branchId).subscribe(o=>{t.eDairyList=o,t.values=o.map(c=>{var u;return null!==(u=c.id)&&void 0!==u?u:""}),console.log("Fetched EDairy by Branch:",t.eDairyList)})})()}getAllEDairyDetails(){var t=this;return(0,m.A)(function*(){t.edairyService.getAllEDairy().subscribe(r=>{t.eDairyList=r,t.values=r.map(o=>{var c;return null!==(c=o.id)&&void 0!==c?c:""}),console.log("All eDairy Entries:",t.eDairyList)})})()}deleteEDairy(t){this.edairyService.deleteEDairy(t).subscribe(()=>{this.getAllEDairyByBranchId()})}editEDairy(t){this.openEditEDairyModal(t)}duplicateEDairy(t){}formatDate(t){return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}isExpanded(t){return this.expandedItemId===t}toggleExpand(t){this.expandedItemId=this.expandedItemId===t?null:t}}return(e=a).\u0275fac=function(t){return new(t||e)(i.rXU(y.Ix),i.rXU(P),i.rXU(d.W3),i.rXU(x.n))},e.\u0275cmp=i.VBU({type:e,selectors:[["app-e-dairy"]],decls:11,vars:2,consts:[[3,"translucent"],["src","../../assets/images/SchooleDairyIcon.png",1,"eDairyHeadderHomeIcon",3,"click"],["size","8",1,"custom-col","ion-text-center"],[4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[4,"ngIf"],["target","_blank",3,"href"]],template:function(t,r){1&t&&(i.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-grid")(3,"ion-row")(4,"ion-col")(5,"ion-img",1),i.bIt("click",function(){return r.routePage("landingPage")}),i.k0s()(),i.j41(6,"ion-col",2),i.EFF(7,"eDairy"),i.k0s(),i.nrm(8,"ion-col"),i.k0s()()()(),i.j41(9,"ion-content"),i.DNE(10,B,7,3,"ion-card",3),i.k0s()),2&t&&(i.Y8G("translucent",!0),i.R7$(10),i.Y8G("ngForOf",r.eDairyList))},dependencies:[h.Sq,h.bT,d.b_,d.I9,d.ME,d.HW,d.tN,d.hU,d.W9,d.lO,d.eU,d.KW,d.uz,d.he,d.nf,d.ln,d.ai,h.PV],styles:[".eDairyHeadderHomeIcon[_ngcontent-%COMP%]{width:50px;height:50px}ion-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:12px;box-shadow:0 3px 10px #0000000d;transition:transform .2s ease-in-out}ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background-color:#deb887;border-top-left-radius:12px;border-top-right-radius:12px}ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:600}ion-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:.9em;color:#6c757d}.comment-bubble[_ngcontent-%COMP%]{background-color:#eef2f7;padding:12px;border-radius:8px;margin-bottom:12px;box-shadow:0 1px 4px #0000000d}.role-badge[_ngcontent-%COMP%]{font-size:.75em;background-color:#007bff;color:#fff;padding:2px 6px;border-radius:4px;margin-left:6px}.attachments-list[_ngcontent-%COMP%]{margin-top:8px}.attachments-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:6px}.attachments-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:underline}.student-grade[_ngcontent-%COMP%]{font-weight:500;color:#28a745;margin-bottom:6px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0}[_nghost-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top-left-radius:12px;border-top-right-radius:12px}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:12px;box-shadow:0 3px 10px #0000000d;transition:transform .2s ease-in-out;cursor:pointer}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}[_nghost-%COMP%]   .eDairyHeadderHomeIcon[_ngcontent-%COMP%]{width:50px;height:50px}"]}),a})()}];let T=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.$C({type:e}),e.\u0275inj=i.G2t({imports:[y.iI.forChild(S),y.iI]}),a})(),U=(()=>{var e;class a{}return(e=a).\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.$C({type:e}),e.\u0275inj=i.G2t({imports:[h.MD,E.YN,d.bv,T]}),a})()}}]);